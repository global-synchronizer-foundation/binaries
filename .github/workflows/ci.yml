name: Copy Binaries and Announce Release

on:
  workflow_dispatch:

permissions:
  contents: write
  packages: write

jobs:
  devnet:
    uses: ./.github/workflows/.check-majority-and-announce.yml
    with:
      environment: DevNet
      info_url: https://docs.dev.global.canton.network.sync.global
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      GROUPS_IO_USER: ${{ secrets.GROUPS_IO_USER }}
      GROUPS_IO_PASS: ${{ secrets.GROUPS_IO_PASS }}

  testnet:
    uses: ./.github/workflows/.check-majority-and-announce.yml
    with:
      environment: TestNet
      info_url: https://docs.test.global.canton.network.sync.global
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      GROUPS_IO_USER: ${{ secrets.GROUPS_IO_USER }}
      GROUPS_IO_PASS: ${{ secrets.GROUPS_IO_PASS }}

  mainnet:
    uses: ./.github/workflows/.check-majority-and-announce.yml
    with:
      environment: MainNet
      info_url: https://docs.global.canton.network.sync.global
    secrets:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      GROUPS_IO_USER: ${{ secrets.GROUPS_IO_USER }}
      GROUPS_IO_PASS: ${{ secrets.GROUPS_IO_PASS }}
